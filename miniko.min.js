//miniko.js 2.1
(function(t){function u(){}function k(a){return"[object Object]"==Object.prototype.toString.call(a)}function q(a){return void 0!==a&&null!==a}function h(a,b){(!q(a)?[]:a instanceof Array?a:[a]).forEach(b);return a}function v(a,b){var c=a.type||"GET",d=a.url||"",e=a.contenttype||"application/x-www-form-urlencoded",h=a.datatype||"application/json",r=a.error||u,w=a.ok||u,f=new window.XMLHttpRequest,k,g,m;if(a.data){if("string"==typeof a.data)g=a.data;else if(/json/.test(e))g=JSON.stringify(a.data);else{g=
[];for(m in a.data)g.push(encodeURIComponent(m)+"="+encodeURIComponent(a.data[m]));g=g.join("&")}/GET|DEL/i.test(c)&&(d+=/\?/.test(d)?"&"+g:"?"+g,g="")}f.onreadystatechange=function(){if(4==f.readyState)if(k&&clearTimeout(k),/^2/.test(f.status)){g=f.responseText;if(/json/.test(h))try{g=JSON.parse(f.responseText)}catch(a){return r("json parse error: "+a.message,f)}w(g,f)}else r(f.responseText,f)};f.open(c,d,!0);f.setRequestHeader("Content-Type",e);if(a.headers)for(m in a.headers)f.setRequestHeader(m,
a.headers[m]);a.timeout&&(k=setTimeout(function(){f.abort();r("timeout",f)},1E3*a.timeout));f.send(g);return f}function l(a,b){var c,d,e=typeof a;if(q(a))if("function"==e)/complete|loaded|interactive/.test(n.readyState)?a():n.addEventListener("DOMContentLoaded",a,!1);else if(k(a))c=v(a);else if("string"==e?/^#[^ ,\.\>\<]*$/.test(a)?c=n.getElementById(a.substr(1)):/^<.+>$/.test(a)?((d=n.createElement("div")).innerHTML=a,c=[].slice.call(d.childNodes),c=c.length?1<c.length?c:c[0]:void 0):c=[].slice.call(n.querySelectorAll(a),
0):c=a,c&&q(b)&&("string"==typeof b&&(b={content:b}),k(b)))for(d in b)"function"==typeof b[d]?"-"==d[0]?p.off(c,d.substr(1),b[d]):p.on(c,d,b[d]):p[d]&&(c=p[d](c,b[d]));return c}var n=t.document,s=/\s+/,p={content:function(a,b){return h(a,"string"==typeof b?function(a){a.innerHTML=b}:function(a){a.innerHTML="";h(b,function(b){a.appendChild(b)})})},append:function(a,b){a instanceof Array&&(a=a.shift());if(q(a))if("string"==typeof b)for(var c="TBODY"==a.tagName?l("<table>",b).children[0].childNodes:
l("<div>",b).childNodes;c.length;)a.appendChild(c[0]);else h(b,function(b){a.appendChild(b)});return a},css:function(a,b){var c,d,e,l=/([\+\-\*])([^\+\-\*\s]+)/g;if(k(b))h(a,function(a){for(c in b)a.style[c]=b[c]});else if(/^[\+\-\*]/.test(b))for(;null!==(c=l.exec(b));)d=c[1],e=c[2],h(a,function(a){var b=a.className.split(s).filter(function(a){return a});"-"!=d&&-1==b.indexOf(e)?b.push(e):"+"!=d&&(b=b.filter(function(a){return a!=e}));a.className=b.join(" ")});else h(a,function(a){a.className=b});
return a},has:function(a,b){var c=0,d=b.split(s);h(a,function(a){c+=a.className.split(s).filter(function(a){return-1!=d.indexOf(a)}).length});return c},on:function(a,b,c){return h(a,function(a){if(k(b))for(var e in b)a.addEventListener(e,b[e]);else a.addEventListener(b,c)})},off:function(a,b,c){return h(a,function(a){if(k(b))for(var e in b)a.removeEventListener(e,b[e]);else a.removeEventListener(b,c)})}};l.fn=p;l.forAll=h;t._=l})(window);
