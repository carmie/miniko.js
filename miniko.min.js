// miniko.js 0.3
// ~L~ nikomomo@gmail.com 2012
// https://github.com/nikopol/miniko.js
var __=function(a){return a instanceof Array?a:[a]},_=function(a,d){var b,g,e;if("object"==typeof a)b=a;else if(a.length)if("#"==a[0]&&!/[ \.\>\<]/.test(a))b=document.getElementById(a.substr(1));else{g=document.querySelectorAll(a);b=[];for(e=0;e<g.length;++e)b.push(g[e])}b&&void 0!=d&&__(b).forEach(function(a){a.innerHTML=d});return b},append=function(a,d){var b=_(a);b&&__(b).forEach(function(a){var b=document.createElement("div");for(b.innerHTML=d;b.childNodes.length;)a.appendChild(b.childNodes[0])});return b},css=function(a,d){var b=_(a),g,e;if(b){if(void 0==d)return b instanceof Array?b:b.className;/^([\+\-\*])(.+)$/.test(d)?(g=RegExp.$1,d=RegExp.$2,__(b).forEach(function(a){e=a.className.split(/\s+/).filter(function(a){return a});"-"!=g&&-1==e.indexOf(d)?e.push(d):"+"!=g&&(e=e.filter(function(a){return a!=d}));b.className=e.join(" ")})):__(b).forEach(function(a){a.className=d});return b}},ajax=function(a,d){"string"==typeof a&&(a={url:a,ok:d});var b=a.type||"GET",g=a.url||"",e=a.contenttype||
"application/x-www-form-urlencoded",j=a.datatype||"application/json",c=new window.XMLHttpRequest,i,f,h;if(a.data){if("string"==typeof a.data)f=a.data;else if(/json/.test(e))f=JSON.stringify(a.data);else{f=[];for(h in a.data)f.push(encodeURIComponent(h)+"="+encodeURIComponent(a.data[h]));f=f.join("&")}/GET|DEL/i.test(b)&&(g+=/\?/.test(g)?"&"+f:"?"+f,f="")}a.error||(a.error=function(a,b){console.error(a,b)});a.ok||(a.ok=function(){});c.onreadystatechange=function(){if(4==c.readyState)if(i&&clearTimeout(i),
/^2/.test(c.status)){f=c.responseText;if(/json/.test(j))try{f=JSON.parse(c.responseText)}catch(b){return a.error("json parse error: "+b.message,c)}a.ok(f,c)}else a.error(c.responseText,c)};c.open(b,g,!0);c.setRequestHeader("Content-Type",e);if(a.headers)for(h in a.headers)c.setRequestHeader(h,a.headers[h]);a.timeout&&(i=setTimeout(function(){c.onreadystatechange=function(){};c.abort();a.error&&a.error("timeout",c)},1E3*a.timeout));c.send(f);return c},position=function(a){return(a=_(a))?(a=a.getBoundingClientRect(),
{left:a.left+window.pageXOffset,top:a.top+window.pageYOffset}):!1},ready=function(a){/complete|loaded|interactive/.test(document.readyState)?a():document.attachEvent?document.attachEvent("ondocumentready",a()):document.addEventListener("DOMContentLoaded",function(){a()},!1)};