// miniko.js 0.3
// ~L~ nikomomo@gmail.com 2012
// https://github.com/nikopol/miniko.js
var __=function(a){return a instanceof Array?a:[a]},_=function(a,c){var b,g,e;if("object"==typeof a)b=a;else if(a.length)if("#"==a[0])b=document.getElementById(a.substr(1));else{g="."==a[0]?document.getElementsByClassName(a.substr(1)):document.querySelectorAll(a);b=[];for(e=0;e<g.length;++e)b.push(g[e])}b&&void 0!=c&&__(b).forEach(function(a){a.innerHTML=c});return b},append=function(a,c){var b=_(a);b&&__(b).forEach(function(a){var b=document.createElement("div");for(b.innerHTML=c;b.childNodes.length;)a.appendChild(b.childNodes[0])});return b},css=function(a,c){var b=_(a),g,e;if(b){if(void 0==c)return b instanceof Array?b:b.className;/^([\+\-\*])(.+)$/.test(c)?(g=RegExp.$1,c=RegExp.$2,__(b).forEach(function(a){e=a.className.split(/\s+/).filter(function(a){return a});"-"!=g&&-1==e.indexOf(c)?e.push(c):"+"!=g&&(e=e.filter(function(a){return a!=c}));b.className=e.join(" ")})):__(b).forEach(function(a){a.className=c});return b}},ajax=function(a,c){"string"==typeof a&&(a={url:a,ok:c});var b=a.type||"GET",g=a.url||"",e=a.contenttype||
"application/x-www-form-urlencoded",j=a.datatype||"application/json",d=new window.XMLHttpRequest,i,f;if(a.data){if("string"==typeof a.data)f=a.data;else if(/json/.test(e))f=JSON.stringify(a.data);else{f=[];for(var h in a.data)f.push(encodeURIComponent(h)+"="+encodeURIComponent(a.data[h]));f=f.join("&")}/GET|DEL/i.test(b)&&(g+=/\?/.test(g)?"&"+f:"?"+f,f="")}a.error||(a.error=function(a,b){console.error(a,b)});a.ok||(a.ok=function(){});d.onreadystatechange=function(){if(4==d.readyState)if(i&&clearTimeout(i),
200<=d.status){f=d.responseText;if(/json/.test(j))try{f=JSON.parse(d.responseText)}catch(b){return a.error("json parse error: "+b.message,d)}a.ok(f,d)}else a.error(d.responseText,d)};d.open(b,g,!0);d.setRequestHeader("Content-Type",e);if(a.headers)for(h in a.headers)d.setRequestHeader(h,a.headers[h]);a.timeout&&(i=setTimeout(function(){d.onreadystatechange=function(){};d.abort();a.error&&a.error("timeout",d)},1E3*a.timeout));d.send(f);return d},position=function(a){var a=_(a),c={};a&&(c=a.getBoundingClientRect(),
c.left+=window.pageXOffset,c.top+=window.pageYOffset);return c},ready=function(a){/complete|loaded|interactive/.test(document.readyState)?a():document.attachEvent?document.attachEvent("ondocumentready",a()):document.addEventListener("DOMContentLoaded",function(){a()},!1)},browser=function(){var a={},c=navigator.userAgent;/MSIE\s([\d\.]+)/.test(c)&&(a.IE=parseFloat(RegExp.$1));c.replace(/\s\(.+\)/g,"").split(" ").forEach(function(b){/^(.+)\/(.+)$/.test(b)&&(a[RegExp.$1]=parseFloat(RegExp.$2))});return a}();
